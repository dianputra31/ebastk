<div  class="modal fade show d-block" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">

      <!-- Baris 1: Judul -->
      <div class="modal-header" style="height: 20px;margin-top:10px;border-bottom: 0px;padding-bottom:0px;margin-bottom:0px;">
          <div class="col-lg-11">
            <h2 class="modal-title">{{ carName }}</h2>
          </div>
          <div class="col-lg-1">
          </div>
      </div>

      <!-- Baris 2: Slider Swipe Gambar -->
      <div class="modal-body text-center">
        <div class="slider-container">
          <button type="button" class="btn btn-link" (click)="prevImage()" [disabled]="selectedImageIndex === 0" style="font-size:35px;font-weight:bold;color:white;cursor: pointer;">‹</button>
          <img [src]="displayedImages[selectedImageIndex]" class="main-image img-fluid" *ngIf="displayedImages.length > 0"  style="max-width: 90%;"/>
          <button type="button" class="btn btn-link" (click)="nextImage()" [disabled]="selectedImageIndex === displayedImages.length - 1"  style="font-size:35px;font-weight:bold;color:white;cursor: pointer;">›</button>
        </div>
      </div>



      <!-- Baris 3: Thumbnail + Tombol Hapus -->
      <div class="row px-3 mb-3">
        <div class="col-3" *ngFor="let img of displayedImages; let i = index">
          <div class="position-relative" style="margin: 0px; padding: 3px; cursor: pointer;">
            <img [src]="img" class="img-thumbnail" (click)="selectedImageIndex = i" style="height: 120px; width: 95%; object-fit: cover;"/>
            <img src="./../../assets/icons/delphot.png" 
                 class="position-absolute top-2 end-2" 
                 style="background-color: transparent; border: 0px; cursor: pointer; width: 24px; height: 24px;" 
                 (click)="removeImage(i)">
          </div>
        </div>

        <!-- Upload dari Kamera -->
        <div class="col-3" *ngIf="!isViewOnly">
          <div class="block" style="height: 120px; display: flex; flex-direction: column; align-items: center; justify-content: center; border: 0px dashed #ccc; border-radius: 8px; cursor: pointer; transition: all 0.3s;" (click)="cameraInput.click()">
            <img src="./../../assets/icons/upload.svg" style="width: 40px; height: 40px; margin-bottom: 8px;">
            <span class="labelblock" style="font-size: 12px; text-align: center;">Ambil Foto</span>
            <input #cameraInput type="file" accept="image/*" capture="environment" hidden (change)="onImageUpload($event)">
          </div>
        </div>

        <!-- Upload dari Galeri -->
        <div class="col-3" *ngIf="!isViewOnly">
          <div class="block" style="height: 120px; display: flex; flex-direction: column; align-items: center; justify-content: center; border: 0px dashed #ccc; border-radius: 8px; cursor: pointer; transition: all 0.3s;" (click)="galleryInput.click()">
            <img src="./../../assets/icons/upload.svg" style="width: 40px; height: 40px; margin-bottom: 8px;">
            <span class="labelblock" style="font-size: 12px; text-align: center;">Pilih dari Galeri</span>
            <input #galleryInput type="file" accept="image/*" multiple hidden (change)="onImageUpload($event)">
          </div>
        </div>
      </div>

      <!-- Baris 4: Tombol Tutup -->
      <div class="modal-footer" style="border:0px;margin-top:0px;padding-top:0px;">
         <button type="button" class="flex items-center space-x-1 bg-red-600 text-white px-4 py-2 rounded-full bw17" (click)="TutupModal()" data-dismiss="modal">
            <span style="font-family:'NunitoSans';font-weight:bold;text-align: center;padding-left: 20px;">Tutup</span>
        </button>
      </div>

    </div>
  </div>
</div>
