<div class="product-container">

    <div class="bg-white rounded-md md:flex md:space-x-6">
        <div class="flex-1 flex justify-center items-center">
        <img alt="Inspection-Summary" class="w-full max-w-sm" height="300" src="../../assets/icons/itsdone.png" />
        </div>
        <div class="flex-1">
        <h1 class="text-2xl font-bold mb-4 bigger">
        Dokumen BASTK
        </h1>
        <p class="mb-4 mediumer">
        Anda dapat mengunduh hasil BASTK di bawah ini :
        </p>
        <ul class="space-y-2 mb-6">
            <!-- <li class="flex justify-between items-center">
            <span class="text-blue-600 biru krs"  (click)="downloadDokUnit('1')">
                Data dan dokumen Unit
            </span>
            <img src="../../assets/icons/download.svg" alt="Download" class="krs" (click)="downloadDokUnit('1')"/>
            </li> -->
            <!-- <li class="flex justify-between items-center">
            <span class="text-blue-600 biru krs" (click)="downloadDokUnit('1')">
                Exterior Inspection
            </span>
            <img src="../../assets/icons/download.svg" alt="Download" class="krs" (click)="downloadDokUnit('1')"/>
            </li>
            <li class="flex justify-between items-center">
            <span class="text-blue-600 biru krs" (click)="downloadDokUnit('1')">
                Interior Inspection
            </span>
            <img src="../../assets/icons/download.svg" alt="Download" class="krs" (click)="downloadDokUnit('1')"/>
            </li>
            <li class="flex justify-between items-center">
            <span class="text-blue-600 biru krs" (click)="downloadDokUnit('1')">
                Engine Inspection
            </span>
            <img src="../../assets/icons/download.svg" alt="Download" class="krs" (click)="downloadDokUnit('1')"/>
            </li>
            <li class="flex justify-between items-center">
            <span class="text-blue-600 biru krs" (click)="downloadDokUnit('1')">
                Unit Photos
            </span>
            <img src="../../assets/icons/download.svg" alt="Download" class="krs" (click)="downloadDokUnit('1')"/>
            </li> -->
        </ul>
        <div class="grid grid-cols-2 gap-4 mb-6">
        <button class="signature-btn" 
                [class.signature-filled]="pengirimSignature"
                [class.signature-empty]="!pengirimSignature"
                (click)="openSignatureModal('pengirim')">
        <i class="fas fa-car btn-icon">
        </i>
        <span class="btn-label">Pengirim</span>
        <span *ngIf="pengirimSignature" class="check-icon">‚úì</span>
        </button>
        <button class="signature-btn" 
                [class.signature-filled]="penerimaSignature"
                [class.signature-empty]="!penerimaSignature"
                (click)="openSignatureModal('penerima')">
        <i class="fas fa-user-circle btn-icon">
        </i>
        <span class="btn-label">Penerima</span>
        <span *ngIf="penerimaSignature" class="check-icon">‚úì</span>
        </button>
        </div>
        <div class="grid grid-cols-2 gap-4 mb-4">
        <button class="batenret krs w-full" 
                [disabled]="!pengirimSignature || !penerimaSignature"
                [class.disabled]="!pengirimSignature || !penerimaSignature"
                (click)="downloadDokUnit('1')">
        <i class="fas fa-download btn-icon">
        </i> Dokumen
        </button>
        <button class="batengrei w-full" (click)="backToRiwayatPage()">
        <i class="fas fa-list btn-icon">
        </i> Riwayat
        </button>
        </div>
        <!-- <div class="grid grid-cols-1">
       <button class="batengrei" (click)="backToInspeksiPage()">
        <i class="fas fa-edit btn-icon">
        </i> Inspeksi
        </button>
        </div> -->
        </div>
    </div>
</div>


<!-- Modal Tanda Tangan -->
<div *ngIf="isSignatureModalOpen" class="signature-modal-overlay" (click)="closeSignatureModal()">
  <div class="signature-modal-content" (click)="$event.stopPropagation()">
    <div class="signature-modal-header">
      <h3>{{ modalTitle }}</h3>
      <button class="close-btn" (click)="closeSignatureModal()">&times;</button>
    </div>
    
    <div class="signature-modal-body">
      <!-- Mode Drawing: Canvas untuk tanda tangan -->
      <div *ngIf="isDrawingMode" class="signature-canvas-container">
        <p class="instruction-text">Silakan tanda tangan di area di bawah ini:</p>
        <canvas #signatureCanvas
                width="500"
                height="250"
                class="signature-canvas">
        </canvas>
      </div>
      
      <!-- Mode Preview: Tampilkan gambar tanda tangan -->
      <div *ngIf="!isDrawingMode" class="signature-preview-container">
        <p class="instruction-text">Tanda tangan tersimpan:</p>
        <img [src]="currentSignatureType === 'pengirim' ? pengirimSignature : penerimaSignature" 
             alt="Tanda Tangan" 
             class="signature-preview" />
      </div>
    </div>
    
    <div class="signature-modal-footer">
      <!-- Tombol untuk mode drawing -->
      <div *ngIf="isDrawingMode" class="button-group">
        <button class="btn-clear" (click)="clear()">
          <span class="btn-icon">üóëÔ∏è</span>
          Clear
        </button>
        <button class="btn-save" (click)="save()">
          <span class="btn-icon">üíæ</span>
          Save
        </button>
      </div>
      
      <!-- Tombol untuk mode preview -->
      <div *ngIf="!isDrawingMode" class="button-group">
        <button class="btn-edit" (click)="editSignature()">
          <span class="btn-icon">‚úèÔ∏è</span>
          Edit Tanda Tangan
        </button>
        <button class="btn-close" (click)="closeSignatureModal()">
          Tutup
        </button>
      </div>
    </div>
  </div>
</div>


<div *ngIf="isLoading" class="loading-overlay">
  <div class="loading-spinner"></div>
  <div class="loading-text">Mengunduh laporan...</div>
</div>