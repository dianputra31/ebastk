<div class="product-container">
    <div class="label-product">{{sampleData?.display_name}}</div>
    <div class="anakan-label">{{sampleData?.brand?.brand_name}} &#x25CF; {{sampleData?.variant_model?.model_name}}</div>

    <div class="container mx-auto">

       <div id="Upload Semua" class="upload-container">
            <h2 class="title">Upload Multiple Foto</h2>
            <h4 style="color:#bf2424;margin-top:-20px;">External, Internal dan Mesin</h4>

            <!-- Upload Area -->
            <label for="multiUploadLuar" class="upload-box" [class.disabled]="isUploading">
                <input 
                type="file" 
                multiple 
                (change)="aplotMultiple($event)" 
                accept="image/*" 
                [disabled]="isUploading"
                id="multiUploadLuar"
                hidden
                />
                <div class="upload-icon">
                <img src="../../assets/icons/upl-button.svg" alt="Upload">
                </div>
                <div class="upload-text">
                <span class="highlight">Klik untuk pilih foto</span> atau seret & lepas ke sini
                </div>
            </label>

            <!-- Progress Slider -->
            <div *ngIf="isUploading" class="upload-progress">
                <div class="progress-info">
                Uploading: {{uploadProgress.current}} / {{uploadProgress.total}}
                </div>
                <div class="slider-bar">
                <div class="slider-fill" [style.width.%]="(uploadProgress.current / uploadProgress.total) * 100"></div>
                </div>
            </div>
        </div>



        <div id="Bagian Luar">
            <h2 class="text-red-600 font-bold text-lg mb-4">Foto Bagian Luar (Exterior)</h2>
            <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 mb-8" >

                    <div *ngFor="let desc of bagianLuarDescriptions" class="bagian-luar-block" style="margin-top:10px;cursor:grab;"
                        (dragover)="onDragOver($event)"
                        (drop)="onDrop($event, desc)">
                        <div style="width:100%;height:30px;display:flex;align-items:center;justify-content:space-between;gap:8px;" class="labelnya">
                            <span>{{ desc }}</span>
                            <input
                                type="file"
                                accept="image/*"
                                capture="environment"
                                class="hidden"
                                [id]="'cameraInputLuar' + sanitize(desc)"
                                (change)="aplot($event, desc, 'Foto Bagian Luar (Exterior)')"
                            />
                            <label
                                [for]="'cameraInputLuar' + sanitize(desc)"
                                title="Ambil foto"
                                style="cursor:pointer;display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;"
                            >
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                    <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h3l2-3h8l2 3h3a2 2 0 0 1 2 2z" />
                                    <circle cx="12" cy="13" r="4" />
                                </svg>
                            </label>
                        </div>
                        <div class="border-2 border-dashed border-blau-400 p-0 flex items-right justify-center blau" style="height: 120px;">
                            <!-- Ada gambar -->
                            <div *ngIf="(bagianLuar[desc] || []).length > 0; else kosong">
                                <div class="img-wrapper" *ngFor="let img of bagianLuar[desc]">
                                    <div class="gbrFile" style="background-image: url({{mediaUrl}}{{img.image_url}});"
                                        draggable="true"
                                        (dragstart)="onDragStart($event, img, desc)">
                                        <img src="./../../assets/icons/delphot.png"
                                            style="cursor:pointer;background-color: transparent;border:0px;position:relative;padding-top:0px;padding-left:20em;padding-top:10px;z-index: 999;"
                                            (click)="removeImage(img.id)">
                                    </div>
                                </div>
                            </div>
                            <!-- Tidak ada gambar -->
                            <ng-template #kosong>
                                <div class="border-0 border-dashed p-0 flex items-center justify-center h-full">
                                    <input type="file" (change)="aplot($event,desc,'Foto Bagian Luar (Exterior)')" accept="image/*" class="hidden" [id]="'fileInputLuar' + sanitize(desc)">
                                    <label [for]="'fileInputLuar' + sanitize(desc)" class="cursor-pointer" style="border:0px;">
                                        <img src="../../assets/icons/upl-button.svg" alt="Upload" class="w-12 h-12">
                                    </label>
                                </div>
                            </ng-template>
                        </div>
                    </div>
            </div>
        </div>

        <div id="Bagian Dalam">
            <h2 class="text-red-600 font-bold text-lg mb-4">Foto Bagian Dalam (Interior & Bagasi)</h2>
            <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 mb-8" >

                    <div *ngFor="let desc of bagianDalamDescriptions" class="bagian-dalam-block" style="margin-top:10px;cursor:grab;"
                        (dragover)="onDragOver($event)"
                        (drop)="onDrop($event, desc)">
                        <div style="width:100%;height:30px;display:flex;align-items:center;justify-content:space-between;gap:8px;" class="labelnya">
                            <span>{{ desc }}</span>
                            <input
                                type="file"
                                accept="image/*"
                                capture="environment"
                                class="hidden"
                                [id]="'cameraInputDalam' + sanitize(desc)"
                                (change)="aplot($event, desc, 'Foto Bagian Dalam (Interior & Bagasi)')"
                            />
                            <label
                                [for]="'cameraInputDalam' + sanitize(desc)"
                                title="Ambil foto"
                                style="cursor:pointer;display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;"
                            >
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                    <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h3l2-3h8l2 3h3a2 2 0 0 1 2 2z" />
                                    <circle cx="12" cy="13" r="4" />
                                </svg>
                            </label>
                        </div>
                        <div class="border-2 border-dashed border-blau-400 p-0 flex items-right justify-center blau" style="height: 120px;">

                            <!-- Ada gambar -->
                            <div *ngIf="(bagianDalam[desc] || []).length > 0; else kosongDalam">
                                <div class="img-wrapper" *ngFor="let img of bagianDalam[desc]">
                                    <div class="gbrFile" style="background-image: url({{mediaUrl}}{{img.image_url}});"
                                      draggable="true"
                                        (dragstart)="onDragStart($event, img, desc)">
                                        <img src="./../../assets/icons/delphot.png" style="cursor:pointer;background-color: transparent;border:0px;position:relative;padding-top:0px;padding-left:20em;padding-top:10px;z-index: 999;"  (click)="removeImage(img.id)">
                                    </div>
                                </div>
                            </div>

                            <!-- Tidak ada gambar -->
                            <ng-template #kosongDalam>
                                <div  class="border-0 border-dashed p-0 flex items-center justify-center h-full">
                                    <input type="file" (change)="aplot($event,desc,'Foto Bagian Dalam (Interior & Bagasi)')" accept="image/*" class="hidden" [id]="'fileInputDalam' + sanitize(desc)">
                                    <label [for]="'fileInputDalam' + sanitize(desc)" class="cursor-pointer" style="border:0px;">
                                    <img src="../../assets/icons/upl-button.svg" alt="Upload" class="w-12 h-12">
                                    </label>
                                </div>
                            </ng-template>
                        </div>
                    </div>
            </div>
        </div>

        <div id="Bagian Mesin">
            <h2 class="text-red-600 font-bold text-lg mb-4">Foto Bagian Mesin</h2>
            <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 mb-8" >

                    <div *ngFor="let desc of bagianMesinDescriptions" class="bagian-mesin-block" style="margin-top:10px;cursor:grab;"
                        (dragover)="onDragOver($event)"
                        (drop)="onDrop($event, desc)">
                        <div style="width:100%;height:30px;display:flex;align-items:center;justify-content:space-between;gap:8px;" class="labelnya">
                            <span>{{ desc }}</span>
                            <input
                                type="file"
                                accept="image/*"
                                capture="environment"
                                class="hidden"
                                [id]="'cameraInputMesin' + sanitize(desc)"
                                (change)="aplot($event, desc, 'Foto Bagian Mesin')"
                            />
                            <label
                                [for]="'cameraInputMesin' + sanitize(desc)"
                                title="Ambil foto"
                                style="cursor:pointer;display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;"
                            >
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                    <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h3l2-3h8l2 3h3a2 2 0 0 1 2 2z" />
                                    <circle cx="12" cy="13" r="4" />
                                </svg>
                            </label>
                        </div>
                        <div class="border-2 border-dashed border-blau-400 p-0 flex items-right justify-center blau" style="height: 120px;">

                            <!-- Ada gambar -->
                            <div *ngIf="(bagianMesin[desc] || []).length > 0; else kosongMesin">
                                <div class="img-wrapper" *ngFor="let img of bagianMesin[desc]">
                                    <div class="gbrFile" style="background-image: url({{mediaUrl}}{{img.image_url}});"
                                      draggable="true"
                                        (dragstart)="onDragStart($event, img, desc)">
                                        <img src="./../../assets/icons/delphot.png" style="cursor:pointer;background-color: transparent;border:0px;position:relative;padding-top:0px;padding-left:20em;padding-top:10px;z-index: 999;"  (click)="removeImage(img.id)">
                                    </div>
                                </div>
                            </div>

                            <!-- Tidak ada gambar -->
                            <ng-template #kosongMesin>
                                <div  class="border-0 border-dashed p-0 flex items-center justify-center h-full">
                                    <input type="file" (change)="aplot($event,desc,'Foto Bagian Mesin')" accept="image/*" class="hidden" [id]="'fileInputMesin' + sanitize(desc)">
                                    <label [for]="'fileInputMesin' + sanitize(desc)" class="cursor-pointer" style="border:0px;">
                                    <img src="../../assets/icons/upl-button.svg" alt="Upload" class="w-12 h-12">
                                    </label>
                                </div>
                            </ng-template>
                        </div>
                    </div>
            </div>
        </div>



        <div id="Foto Minus">

            
        <div id="Upload Minus" class="upload-container">
            <h2 class="title">Upload Multiple Foto</h2>
            <h4 style="color:#bf2424;margin-top:-20px;">Foto Kerusakan/Minus</h4>

            <!-- Upload Area -->
            <label for="multiUploadMinus" class="upload-box" [class.disabled]="isUploading">
                <input 
                type="file" 
                multiple 
                (change)="aplotMultipleMinus($event)" 
                accept="image/*" 
                [disabled]="isUploading"
                id="multiUploadMinus"
                hidden
                />
                <div class="upload-icon">
                <img src="../../assets/icons/upl-button.svg" alt="Upload">
                </div>
                <div class="upload-text">
                <span class="highlight">Klik untuk pilih foto</span> atau seret & lepas ke sini
                </div>
            </label>

            <!-- Progress Slider -->
            <div *ngIf="isUploading" class="upload-progress">
                <div class="progress-info">
                Uploading: {{uploadProgress.current}} / {{uploadProgress.total}}
                </div>
                <div class="slider-bar">
                <div class="slider-fill" [style.width.%]="(uploadProgress.current / uploadProgress.total) * 100"></div>
                </div>
            </div>
        </div>

            <h2 class="text-red-600 font-bold text-lg mb-4">Foto Kerusakan/Kekurangan Unit (Minus)</h2>
            <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 mb-8" >

                <div class="bagian-minus-block" style="margin-top:10px;" *ngFor="let img of bagianMinus['all']">
                    <div style="width:100%;height:30px;" class="labelnya">{{ img.descriptions }}</div>
                    <div class="border-2 border-dashed border-blau-400 p-0 flex items-right justify-center blau" style="height: 120px;">
                        <div class="img-wrapper">
                        <div class="gbrFile" style="background-image: url({{mediaUrl}}{{img.image_url}});">
                            <img src="./../../assets/icons/delphot.png"
                                style="cursor:pointer;background-color: transparent;border:0px;position:relative;padding-top:0px;padding-left:20em;padding-top:10px;z-index: 999;"
                                (click)="removeImage(img.id)">
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="Foto Sistem" class="d-none">
            <h2 class="text-red-600 font-bold text-lg mb-4">Foto Sistem</h2>
            <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 mb-8" >

                    <div *ngFor="let desc of bagianSistemDescriptions" class="bagian-sistem-block" style="margin-top:10px;">
                        <div style="width:100%;height:30px;" class="labelnya">{{ desc }}</div>
                        <div class="border-2 border-dashed border-blau-400 p-0 flex items-right justify-center blau" style="height: 120px;">

                            <!-- Ada gambar -->
                            <div *ngIf="(bagianSistem[desc] || []).length > 0; else kosongSistem">
                                <div class="img-wrapper" *ngFor="let img of bagianSistem[desc]">
                                    <div class="gbrFile" style="background-image: url({{mediaUrl}}{{img.image_url}});">
                                        <img src="./../../assets/icons/delphot.png" style="cursor:pointer;background-color: transparent;border:0px;position:relative;padding-top:0px;padding-left:20em;padding-top:10px;z-index: 999;"  (click)="removeImage(img.id)">
                                    </div>
                                </div>
                            </div>

                            <!-- Tidak ada gambar -->
                            <ng-template #kosongSistem>
                                <div  class="border-0 border-dashed p-0 flex items-center justify-center h-full">
                                    <input type="file" (change)="aplot($event,desc,'Foto Sistem')" accept="image/*" class="hidden" [id]="'fileInputSistem' + sanitize(desc)">
                                    <label [for]="'fileInputSistem' + sanitize(desc)" class="cursor-pointer" style="border:0px;">
                                    <img src="../../assets/icons/upl-button.svg" alt="Upload" class="w-12 h-12">
                                    </label>
                                </div>
                                <!-- <app-image-unitphotos-uploader (reloadDisPage)="infoUnit()" [unitId]="unit_id" [labelDoc]="'Foto Bagian Dalam (Interior & Bagasi)'" [labelDesc]="desc"></app-image-unitphotos-uploader> -->
                            </ng-template>
                        </div>
                    </div>
            </div>
        </div>


    </div>
</div>


<div *ngIf="isLoading" class="loading-overlay">
  <div class="loading-spinner"></div>
  <div class="loading-text">Data sedang dimuat...</div>
</div>

<div *ngIf="isSwapping" class="loading-overlay">
  <div class="loading-spinner"></div>
  <div class="loading-text">Foto sedang ditukar...</div>
</div>